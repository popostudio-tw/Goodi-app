2025-12-19T13:04:11.579941Z I generatedailycontent: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2025-12-19T13:04:11.588882Z I generateyesterdaysummary: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2025-12-19T13:04:11.902894Z W generatedailycontent: 
2025-12-19T13:04:11.926062Z W generateyesterdaysummary: 
2025-12-19T13:04:12.011014Z D generatedailycontent: {"message":"Callable request verification passed","verifications":{"app":"MISSING","auth":"VALID"}}
2025-12-19T13:04:12.012382Z D generateyesterdaysummary: {"verifications":{"auth":"VALID","app":"MISSING"},"message":"Callable request verification passed"}
2025-12-19T13:04:14.212375Z ? generatedailycontent: Daily Content Retrieval Error: HttpsError: 鞈?????啣虜嚗?瑼Ｘ蝬脰楝
    at /workspace/lib/index.js:252:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/firebase-functions/lib/common/providers/https.js:513:14 {
  code: 'not-found',
  details: undefined,
  httpErrorCode: { canonicalName: 'NOT_FOUND', status: 404 }
}

2025-12-19T13:07:25.038956Z I generateyesterdaysummary: 
2025-12-19T13:07:25.041596Z I generatedailycontent: 
2025-12-19T13:07:25.258412Z W generatedailycontent: 
2025-12-19T13:07:25.258965Z W generateyesterdaysummary: 
2025-12-19T13:07:25.267997Z D generatedailycontent: {"message":"Callable request verification passed","verifications":{"app":"MISSING","auth":"VALID"}}
2025-12-19T13:07:25.268469Z D generateyesterdaysummary: {"verifications":{"auth":"VALID","app":"MISSING"},"message":"Callable request verification passed"}
2025-12-19T13:07:25.533510Z ? generatedailycontent: Daily Content Retrieval Error: HttpsError: 鞈?????啣虜嚗?瑼Ｘ蝬脰楝
    at /workspace/lib/index.js:252:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/firebase-functions/lib/common/providers/https.js:513:14 {
  code: 'not-found',
  details: undefined,
  httpErrorCode: { canonicalName: 'NOT_FOUND', status: 404 }
}

2025-12-19T13:08:12.733029Z I generatedailycontent: 
2025-12-19T13:08:12.959313Z W generatedailycontent: 
2025-12-19T13:08:12.967986Z D generatedailycontent: {"verifications":{"app":"MISSING","auth":"VALID"},"message":"Callable request verification passed"}
2025-12-19T13:08:13.226914Z ? generatedailycontent: Daily Content Retrieval Error: HttpsError: 鞈?????啣虜嚗?瑼Ｘ蝬脰楝
    at /workspace/lib/index.js:252:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/firebase-functions/lib/common/providers/https.js:513:14 {
  code: 'not-found',
  details: undefined,
  httpErrorCode: { canonicalName: 'NOT_FOUND', status: 404 }
}

2025-12-19T13:08:21.603247Z I generatedailycontent: 
2025-12-19T13:08:21.843391Z W generatedailycontent: 
2025-12-19T13:08:21.849048Z D generatedailycontent: {"message":"Callable request verification passed","verifications":{"app":"MISSING","auth":"VALID"}}
2025-12-19T13:08:22.101783Z ? generatedailycontent: Daily Content Retrieval Error: HttpsError: 鞈?????啣虜嚗?瑼Ｘ蝬脰楝
    at /workspace/lib/index.js:252:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/firebase-functions/lib/common/providers/https.js:513:14 {
  code: 'not-found',
  details: undefined,
  httpErrorCode: { canonicalName: 'NOT_FOUND', status: 404 }
}

2025-12-19T17:00:00.895043Z E scheduleddailycontent: 
2025-12-19T17:00:00.897818Z I scheduledweeklyreports: 
2025-12-19T17:00:00.924913Z I scheduledweeklyreports: Starting new instance. Reason: AUTOSCALING - Instance started due to configured scaling factors (e.g. CPU utilization, request throughput, etc.) or no existing capacity for current traffic.
2025-12-19T17:00:00.928060Z I scheduleddailycontent: Starting new instance. Reason: AUTOSCALING - Instance started due to configured scaling factors (e.g. CPU utilization, request throughput, etc.) or no existing capacity for current traffic.
2025-12-19T17:00:03.134139Z I scheduleddailycontent: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2025-12-19T17:00:03.317647Z ? scheduleddailycontent: Pre-generating daily content for 2025-12-20 (Taipei Time)

2025-12-19T17:00:03.906974Z I scheduledweeklyreports: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2025-12-19T17:00:04.725537Z ? scheduledweeklyreports: Starting weekly report generation for week: 2025-W51

2025-12-19T17:00:05.829139Z ? scheduleddailycontent: Starting AI generation for 2025-12-20

2025-12-19T17:00:05.963522Z ? scheduleddailycontent: AI hit 429, retry 1/2 after 2s...

2025-12-19T17:00:06.428274Z ? scheduledweeklyreports: Found 3 premium users

2025-12-19T17:00:06.576333Z ? scheduledweeklyreports: Failed to generate report for user 67kuY49uI5hB4fGPfHaoLxufx2i2: ApiError: {"error":{"code":429,"message":"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\nPlease retry in 53.453650172s.","status":"RESOURCE_EXHAUSTED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Learn more about Gemini API quotas","url":"https://ai.google.dev/gemini-api/docs/rate-limits"}]},{"@type":"type.googleapis.com/google.rpc.QuotaFailure","violations":[{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerDayPerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerMinutePerProjectPerModel-FreeTier","quotaDimensions":{"model":"gemini-2.0-flash","location":"global"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count","quotaId":"GenerateContentInputTokensPerModelPerMinute-FreeTier","quotaDimensions":{"model":"gemini-2.0-flash","location":"global"}}]},{"@type":"type.googleapis.com/google.rpc.RetryInfo","retryDelay":"53s"}]}}
    at throwErrorIfNotOK (/workspace/node_modules/@google/genai/dist/node/index.cjs:12044:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/@google/genai/dist/node/index.cjs:11764:13
    at async Models.generateContent (/workspace/node_modules/@google/genai/dist/node/index.cjs:13094:24)
    at async generateWeeklyReportForUser (/workspace/lib/index.js:461:22)
    at async /workspace/lib/index.js:490:39
    at async httpFunc (/workspace/node_modules/firebase-functions/lib/v2/providers/scheduler.js:50:4) {
  status: 429
}

2025-12-19T17:00:07.625575Z ? scheduledweeklyreports: Failed to generate report for user jxzzahGNa9WeCLABXNap4wqtRL13: ApiError: {"error":{"code":429,"message":"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\nPlease retry in 52.384951627s.","status":"RESOURCE_EXHAUSTED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Learn more about Gemini API quotas","url":"https://ai.google.dev/gemini-api/docs/rate-limits"}]},{"@type":"type.googleapis.com/google.rpc.QuotaFailure","violations":[{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count","quotaId":"GenerateContentInputTokensPerModelPerMinute-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerMinutePerProjectPerModel-FreeTier","quotaDimensions":{"model":"gemini-2.0-flash","location":"global"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerDayPerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}}]},{"@type":"type.googleapis.com/google.rpc.RetryInfo","retryDelay":"52s"}]}}
    at throwErrorIfNotOK (/workspace/node_modules/@google/genai/dist/node/index.cjs:12044:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/@google/genai/dist/node/index.cjs:11764:13
    at async Models.generateContent (/workspace/node_modules/@google/genai/dist/node/index.cjs:13094:24)
    at async generateWeeklyReportForUser (/workspace/lib/index.js:461:22)
    at async /workspace/lib/index.js:490:39
    at async httpFunc (/workspace/node_modules/firebase-functions/lib/v2/providers/scheduler.js:50:4) {
  status: 429
}

2025-12-19T17:00:08.007739Z ? scheduleddailycontent: AI hit 429, retry 2/2 after 2s...

2025-12-19T17:00:08.684246Z ? scheduledweeklyreports: Failed to generate report for user y74W4lryG7ZSsy4Ul9XnkyvQiCu2: ApiError: {"error":{"code":429,"message":"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\nPlease retry in 51.331018425s.","status":"RESOURCE_EXHAUSTED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Learn more about Gemini API quotas","url":"https://ai.google.dev/gemini-api/docs/rate-limits"}]},{"@type":"type.googleapis.com/google.rpc.QuotaFailure","violations":[{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerDayPerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerMinutePerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count","quotaId":"GenerateContentInputTokensPerModelPerMinute-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}}]},{"@type":"type.googleapis.com/google.rpc.RetryInfo","retryDelay":"51s"}]}}
    at throwErrorIfNotOK (/workspace/node_modules/@google/genai/dist/node/index.cjs:12044:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/@google/genai/dist/node/index.cjs:11764:13
    at async Models.generateContent (/workspace/node_modules/@google/genai/dist/node/index.cjs:13094:24)
    at async generateWeeklyReportForUser (/workspace/lib/index.js:461:22)
    at async /workspace/lib/index.js:490:39
    at async httpFunc (/workspace/node_modules/firebase-functions/lib/v2/providers/scheduler.js:50:4) {
  status: 429
}

2025-12-19T17:00:09.685642Z ? scheduledweeklyreports: Weekly reports completed. Success: 0, Errors: 3

2025-12-19T17:00:10.062499Z ? scheduleddailycontent: Content generation helper error: ApiError: {"error":{"code":429,"message":"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\nPlease retry in 49.954934081s.","status":"RESOURCE_EXHAUSTED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Learn more about Gemini API quotas","url":"https://ai.google.dev/gemini-api/docs/rate-limits"}]},{"@type":"type.googleapis.com/google.rpc.QuotaFailure","violations":[{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerDayPerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerMinutePerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count","quotaId":"GenerateContentInputTokensPerModelPerMinute-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}}]},{"@type":"type.googleapis.com/google.rpc.RetryInfo","retryDelay":"49s"}]}}
    at throwErrorIfNotOK (/workspace/node_modules/@google/genai/dist/node/index.cjs:12044:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/@google/genai/dist/node/index.cjs:11764:13
    at async Models.generateContent (/workspace/node_modules/@google/genai/dist/node/index.cjs:13094:24)
    at async /workspace/lib/index.js:161:32
    at async Transaction.runTransactionOnce (/workspace/node_modules/@google-cloud/firestore/build/src/transaction.js:440:28)
    at async /workspace/node_modules/@google-cloud/firestore/build/src/transaction.js:412:28
    at async generateAndStoreDailyContent (/workspace/lib/index.js:133:16)
    at async /workspace/lib/index.js:229:5
    at async httpFunc (/workspace/node_modules/firebase-functions/lib/v2/providers/scheduler.js:50:4) {
  status: 429
}

2025-12-19T17:00:10.063269Z E scheduleddailycontent: Error: {"error":{"code":429,"message":"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\nPlease retry in 49.954934081s.","status":"RESOURCE_EXHAUSTED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Learn more about Gemini API quotas","url":"https://ai.google.dev/gemini-api/docs/rate-limits"}]},{"@type":"type.googleapis.com/google.rpc.QuotaFailure","violations":[{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerDayPerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerMinutePerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count","quotaId":"GenerateContentInputTokensPerModelPerMinute-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}}]},{"@type":"type.googleapis.com/google.rpc.RetryInfo","retryDelay":"49s"}]}}
    at entryFromArgs (/workspace/node_modules/firebase-functions/lib/logger/index.js:120:13)
    at Object.error (/workspace/node_modules/firebase-functions/lib/logger/index.js:109:8)
    at httpFunc (/workspace/node_modules/firebase-functions/lib/v2/providers/scheduler.js:53:25)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-12-20T01:30:35.331923Z I generatedailycontent: 
2025-12-20T01:30:35.363637Z I generatedailycontent: Starting new instance. Reason: AUTOSCALING - Instance started due to configured scaling factors (e.g. CPU utilization, request throughput, etc.) or no existing capacity for current traffic.
2025-12-20T01:30:36.896116Z I generatedailycontent: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2025-12-20T01:30:37.204034Z W generatedailycontent: 
2025-12-20T01:30:37.304886Z D generatedailycontent: {"message":"Callable request verification passed","verifications":{"auth":"VALID","app":"MISSING"}}
2025-12-20T01:30:39.258027Z ? generatedailycontent: Daily Content Retrieval Error: HttpsError: 鞈?????啣虜嚗?瑼Ｘ蝬脰楝
    at /workspace/lib/index.js:252:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/firebase-functions/lib/common/providers/https.js:513:14 {
  code: 'not-found',
  details: undefined,
  httpErrorCode: { canonicalName: 'NOT_FOUND', status: 404 }
}

2025-12-20T01:30:46.561324Z I generatedailycontent: 
2025-12-20T01:30:46.749191Z W generatedailycontent: 
2025-12-20T01:30:46.755778Z D generatedailycontent: {"verifications":{"auth":"VALID","app":"MISSING"},"message":"Callable request verification passed"}
2025-12-20T01:30:47.021111Z ? generatedailycontent: Daily Content Retrieval Error: HttpsError: 鞈?????啣虜嚗?瑼Ｘ蝬脰楝
    at /workspace/lib/index.js:252:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /workspace/node_modules/firebase-functions/lib/common/providers/https.js:513:14 {
  code: 'not-found',
  details: undefined,
  httpErrorCode: { canonicalName: 'NOT_FOUND', status: 404 }
}

